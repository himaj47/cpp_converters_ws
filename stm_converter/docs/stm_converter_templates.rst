STM Converter Templates
=======================

These Jinja2 templates are used by ``stm_converter`` to generate ROS 2 
message definitions and type adapters.

Message Template
----------------

This template defines how custom C++ structs are converted into ROS 2 
message definitions.

.. literalinclude:: ../../stm_converter/resource/templates/message/message.txt
   :language: jinja
   :caption: message.txt

Type Adapter Templates
----------------------

Main Template
~~~~~~~~~~~~~

The entry point template for generating type adapters.  
It includes the helper sub-templates based on type (array / non-array).

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/type_adapter.txt
   :language: jinja
   :caption: type_adapter.txt

Includes
~~~~~~~~

Utility templates for managing include directives inside generated adapters.

- **extras.txt** → Optional extra includes for non-primitive/autogenerated types.  
- **includes.txt** → Standard includes needed for adapters.  

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/includes/extras.txt
   :language: jinja
   :caption: extras.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/includes/includes.txt
   :language: jinja
   :caption: includes.txt

Array Types
~~~~~~~~~~~

These templates handle type adapter code when the field is of array/vector type.

- **adapter__to_custom.txt** → Calls the adapter (convert_to_custom) of the non-primitive type inside the loop.  
- **adapter__to_ros.txt** → Calls the adapter (convert_to_ros_message) of the non-primitive type inside the loop.  
- **loop.txt** → Iterates through elements in array (source field).  
- **np_push_back.txt** → Pushes elements into destination field of non-primitive types.  
- **push_back.txt** → Pushes elements into destination field of primitive types.  

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/array_types/adapter__to_custom.txt
   :language: jinja
   :caption: adapter__to_custom.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/array_types/adapter__to_ros.txt
   :language: jinja
   :caption: adapter__to_ros.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/array_types/loop.txt
   :language: jinja
   :caption: loop.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/array_types/np_push_back.txt
   :language: jinja
   :caption: np_push_back.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/array_types/push_back.txt
   :language: jinja
   :caption: push_back.txt

Non-Array Types
~~~~~~~~~~~~~~~

These templates handle type adapter code when the field is a non-array type.

- **na_adapter__to_custom.txt** → Calls the adapter (convert_to_custom) of the non-primitive type.  
- **na_adapter__to_ros.txt** → Calls the adapter (convert_to_ros_message) of the non-primitive type.
- **non_array_types.txt** → Direct field assignment for non-array types.

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/non_array_types/na_adapter__to_custom.txt
   :language: jinja
   :caption: na_adapter__to_custom.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/non_array_types/na_adapter__to_ros.txt
   :language: jinja
   :caption: na_adapter__to_ros.txt

.. literalinclude:: ../../stm_converter/resource/templates/type_adapter/non_array_types/non_array_types.txt
   :language: jinja
   :caption: non_array_types.txt
